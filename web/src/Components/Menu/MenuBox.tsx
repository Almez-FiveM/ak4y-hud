import React from 'react';
import { useSelector } from 'react-redux';
import { Box, Divider, Flex, Text } from '@chakra-ui/react';
import { updateMenuData, selectMenu } from '../../Store/store';
import { useDispatch } from 'react-redux';
import day_time from '../../Assets/day_time.png';
import night_time from '../../Assets/night_time.png';
import Media from './Media';
import Vehicle from './Vehicle';
import Games from './Games';
import Map from './Map';
import { useNuiEvent } from '../../Hooks/useNuiEvent';

const MenuList: { [key: number]: () => JSX.Element } = {
  0: () => <Media/>,
  1: () => <Map/>,
  2: () => <Vehicle/>,
  3: () => <Games/>,
}

const menuToLeft = (menu: number) => {
  if (menu === 0) {
    return 12;
  } else if (menu === 1) {
    return 34;
  } else if (menu === 2) {
    return 58;
  } else if (menu === 3) {
    return 84;
  }
}

const MenuBox = () => {
  const menu = useSelector(selectMenu);
  const dispatch = useDispatch();

  const handleMenuSelect = (key: number) => {
    dispatch(updateMenuData('selectedMenu', key));
  }

  return (
    <>
      <Flex
        position={'absolute'}
        bottom={'8.5vh'}
        left={'1vw'}
        width={'17.8vw'}
        height={'17.8vw'}
        flexDir={'column'}
        gap={'1vh'}
      >
        <Flex width={'100%'} height={'5vh'} justify={'space-between'} px={'1vw'} bg={'linear-gradient(89.97deg, #090909 6.79%, #161616 53.56%, #0B0B0B 96.72%)'}
          border={'1px solid rgba(255, 255, 255, 0.1)'} borderRadius={'5px'}
          align={'center'}
          fontSize={'.75vw'}
          color={'#9E9E9E'}
          fontFamily={'Rajdhani'}
          fontWeight={500}
          pos={'relative'}
          overflow={'hidden'}
        >
          <Flex gap={'.25vw'} align={'center'} onClick={() => handleMenuSelect(0)} cursor={'pointer'}>
            <svg width="16" height="16" viewBox="0 0 11 11" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path opacity="0.4" d="M10.0166 7.45184L10.0166 9.0067C10.0166 9.65063 9.49042 10.1724 8.84105 10.1724L7.27306 10.1724C6.62369 10.1724 6.09751 9.65063 6.09751 9.0067L6.09751 7.45184C6.09751 6.80791 6.62369 6.28613 7.27306 6.28613L8.84105 6.28613C9.49042 6.28613 10.0166 6.80791 10.0166 7.45184Z" fill={menu.selectedMenu == 0 ? '#50BCF9' : '#9E9E9E'} />
              <path fillRule="evenodd" clipRule="evenodd" d="M10.0161 2.15399L10.0161 3.70885C10.0161 4.35278 9.48993 4.87456 8.84056 4.87456L7.27257 4.87456C6.6232 4.87456 6.09702 4.35278 6.09702 3.70885L6.09702 2.15399C6.09702 1.51006 6.6232 0.988281 7.27257 0.988281L8.84056 0.988281C9.48993 0.988281 10.0161 1.51006 10.0161 2.15399ZM4.75099 2.15409L4.75099 3.70895C4.75099 4.35288 4.22481 4.87465 3.57544 4.87465L2.00745 4.87465C1.35852 4.87465 0.831894 4.35288 0.831894 3.70895L0.831894 2.15409C0.831894 1.51016 1.35852 0.988379 2.00745 0.988379L3.57544 0.988379C4.22481 0.988379 4.75099 1.51016 4.75099 2.15409ZM4.75099 9.00646L4.75099 7.4516C4.75099 6.80767 4.22481 6.2859 3.57544 6.2859L2.00745 6.2859C1.35852 6.2859 0.831895 6.80767 0.831895 7.4516L0.831895 9.00646C0.831894 9.65039 1.35852 10.1722 2.00745 10.1722L3.57544 10.1722C4.22481 10.1722 4.75099 9.6504 4.75099 9.00646Z" fill={menu.selectedMenu == 0 ? '#50BCF9' : '#9E9E9E'} />
            </svg>
            <Text color={menu.selectedMenu == 0 ? '#50BCF9' : ''}>Media</Text>
          </Flex>
          <Divider bg={'#353535'} h={'50%'} w={'2px'} />
          <Flex gap={'.25vw'} align={'center'} onClick={() => handleMenuSelect(1)} cursor={'pointer'}>
            <svg width="16" height="16" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
              <g opacity="0.5">
                <path d="M1.90088 5.30759V9.8125C1.90088 10.3909 1.90088 10.6801 2.0578 10.8978C2.21472 11.1155 2.48907 11.207 3.03777 11.3899L3.68331 11.605C4.44099 11.8576 4.81983 11.9839 5.20124 11.9328C5.20959 11.9317 5.21791 11.9305 5.22622 11.9292V4.17014C5.16366 4.17948 5.10058 4.18526 5.03729 4.18742C4.73844 4.19763 4.44269 4.09904 3.8512 3.90188C3.07644 3.64363 2.68906 3.5145 2.3943 3.64563C2.28965 3.69218 2.19575 3.75986 2.11849 3.84442C1.90088 4.08258 1.90088 4.49092 1.90088 5.30759Z" fill={menu.selectedMenu == 1 ? '#50BCF9' : '#9E9E9E'} />
                <path d="M11.8771 8.95479V4.44984C11.8771 3.87147 11.8771 3.58227 11.7202 3.36456C11.5632 3.14684 11.2889 3.05539 10.7402 2.87249L10.0947 2.65731C9.33698 2.40475 8.95817 2.27847 8.57675 2.32955C8.56838 2.33066 8.56007 2.33187 8.55176 2.33315V10.0922C8.61433 10.0829 8.6774 10.0771 8.74069 10.0749C9.03953 10.0647 9.33526 10.1633 9.92679 10.3605C10.7015 10.6187 11.0889 10.7479 11.3837 10.6167C11.4883 10.5702 11.5823 10.5025 11.6595 10.4179C11.8771 10.1798 11.8771 9.77144 11.8771 8.95479Z" fill={menu.selectedMenu == 1 ? '#50BCF9' : '#9E9E9E'} />
              </g>
              <path d="M5.36288 4.14335C5.31764 4.15404 5.272 4.16282 5.22607 4.16968V11.9287C5.5972 11.8715 5.92933 11.6501 6.57927 11.2167L7.34543 10.706C7.86424 10.3601 8.12361 10.1872 8.41463 10.1184C8.45986 10.1077 8.50547 10.0989 8.55142 10.0921V2.33301C8.18031 2.39029 7.84816 2.61169 7.19817 3.04502L6.43206 3.55578C5.91326 3.90163 5.65389 4.07456 5.36288 4.14335Z" fill={menu.selectedMenu == 1 ? '#50BCF9' : '#9E9E9E'} />
              <path d="M9.92676 10.3604C9.9752 10.3765 10.0221 10.3921 10.0675 10.4072L9.92676 10.3604Z" fill={menu.selectedMenu == 1 ? '#50BCF9' : '#9E9E9E'} />
            </svg>
            <Text color={menu.selectedMenu == 1 ? '#50BCF9' : ''}>Map</Text>
          </Flex>
          <Divider bg={'#353535'} h={'50%'} w={'2px'} />
          <Flex gap={'.25vw'} align={'center'} onClick={() => handleMenuSelect(2)} cursor={'pointer'}>
            <svg width="16" height="16" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg">
              <g opacity="0.5">
                <path d="M5.77036 7.39168C5.77036 8.30997 6.51474 9.05435 7.43303 9.05435C8.35132 9.05435 9.0957 8.30997 9.0957 7.39168C9.0957 6.47338 8.35133 5.729 7.43303 5.729C6.51474 5.729 5.77036 6.47338 5.77036 7.39168Z" fill="#9E9E9E" />
                <path fillRule="evenodd" clipRule="evenodd" d="M7.43286 12.9341C4.37199 12.9341 1.89062 10.4527 1.89062 7.39185C1.89062 4.33095 4.37199 1.84961 7.43286 1.84961C10.4938 1.84961 12.9751 4.33095 12.9751 7.39185C12.9751 10.4527 10.4938 12.9341 7.43286 12.9341ZM4.10752 7.39185C4.10752 9.22838 5.59633 10.7172 7.43286 10.7172C9.2694 10.7172 10.7582 9.22838 10.7582 7.39185C10.7582 5.55531 9.2694 4.0665 7.43286 4.0665C5.59633 4.0665 4.10752 5.55531 4.10752 7.39185ZM7.43286 9.05452C6.51457 9.05452 5.77019 8.31014 5.77019 7.39185C5.77019 6.47355 6.51457 5.72918 7.43286 5.72918C8.35115 5.72918 9.09553 6.47355 9.09553 7.39185C9.09553 8.31014 8.35115 9.05452 7.43286 9.05452Z" fill={menu.selectedMenu == 2 ? '#50BCF9' : '#9E9E9E'} />
              </g>
              <path d="M4.3671 6.10193L5.83053 6.94686C5.90684 6.67163 6.0521 6.42511 6.24658 6.22711L4.78338 5.38232C4.61622 5.60235 4.47584 5.84384 4.3671 6.10193Z" fill={menu.selectedMenu == 2 ? '#50BCF9' : '#9E9E9E'} />
              <path d="M7.0173 4.09212L7.0173 5.78143C7.15014 5.74726 7.28937 5.72908 7.43285 5.72908C7.57645 5.72908 7.71579 5.74727 7.84863 5.78148L7.84863 4.09214C7.71246 4.07516 7.57368 4.06641 7.43285 4.06641C7.29214 4.06641 7.15347 4.07515 7.0173 4.09212Z" fill={menu.selectedMenu == 2 ? '#50BCF9' : '#9E9E9E'} />
              <path d="M10.0823 5.38232L8.61907 6.22711C8.81354 6.42516 8.95882 6.67168 9.0351 6.94685L10.4985 6.10194C10.3898 5.84385 10.2494 5.60236 10.0823 5.38232Z" fill={menu.selectedMenu == 2 ? '#50BCF9' : '#9E9E9E'} />
              <path d="M9.0351 7.83691L10.4985 8.68183C10.3898 8.93993 10.2494 9.18146 10.0823 9.40149L8.61908 8.55668C8.81355 8.35866 8.95882 8.11214 9.0351 7.83691Z" fill={menu.selectedMenu == 2 ? '#50BCF9' : '#9E9E9E'} />
              <path d="M7.0173 9.0025C7.15014 9.03669 7.28937 9.05487 7.43285 9.05487C7.57645 9.05487 7.71579 9.03669 7.84863 9.00244L7.84863 10.6918C7.71246 10.7088 7.57368 10.7175 7.43285 10.7175C7.29214 10.7175 7.15347 10.7088 7.0173 10.6918L7.0173 9.0025Z" fill={menu.selectedMenu == 2 ? '#50BCF9' : '#9E9E9E'} />
              <path d="M5.83047 7.83691C5.90679 8.11214 6.0521 8.35861 6.24658 8.55663L4.78338 9.40143C4.61622 9.18141 4.47584 8.93993 4.3671 8.68183L5.83047 7.83691Z" fill={menu.selectedMenu == 2 ? '#50BCF9' : '#9E9E9E'} />
            </svg>
            <Text color={menu.selectedMenu == 2 ? '#50BCF9' : ''}>Vehicle</Text>
          </Flex>
          <Divider bg={'#353535'} h={'50%'} w={'2px'} />
          <Flex gap={'.25vw'} align={'center'} onClick={() => handleMenuSelect(3)} cursor={'pointer'}>
            <svg width="18" height="18" viewBox="0 0 13 13" fill="none" xmlns="http://www.w3.org/2000/svg">
              <g opacity="0.5">
                <path d="M5.26297 2.47457L5.52288 2.65852C5.72474 2.80137 5.96596 2.87809 6.21324 2.87809C6.46057 2.87809 6.70178 2.80137 6.90365 2.65851L7.16356 2.47457C7.5345 2.21203 7.97778 2.07104 8.4322 2.07104H8.74939C8.95871 2.07104 9.17015 2.08425 9.3674 2.15421C10.6013 2.59183 11.4501 4.19169 11.3887 7.82061C11.3763 8.55177 11.2052 9.35988 10.5455 9.67536C10.3399 9.7737 10.0989 9.8389 9.82441 9.8389C9.49505 9.8389 9.23348 9.74501 9.03162 9.6127C8.81992 9.47397 8.63355 9.29365 8.44722 9.11338C8.21698 8.8906 7.98685 8.66797 7.70922 8.52401C7.40679 8.3672 7.07112 8.28533 6.73053 8.28533H5.69595C5.35536 8.28533 5.01968 8.3672 4.71728 8.52401C4.43963 8.66797 4.2095 8.8906 3.97926 9.11338C3.79294 9.29365 3.60656 9.47397 3.39487 9.6127C3.19299 9.74501 2.93144 9.8389 2.60207 9.8389C2.32758 9.8389 2.08654 9.7737 1.88096 9.67536C1.22125 9.35988 1.05016 8.55177 1.03779 7.82061C0.976402 4.19169 1.82515 2.59183 3.05905 2.15421C3.25632 2.08425 3.46776 2.07104 3.67707 2.07104H3.99424C4.44871 2.07104 4.89199 2.21203 5.26297 2.47457Z" fill={menu.selectedMenu == 3 ? '#50BCF9' : '#9E9E9E'} />
              </g>
              <path d="M8.67453 4.14233C8.88902 4.14233 9.06292 4.31623 9.06292 4.53073C9.06292 4.74523 8.88902 4.91912 8.67453 4.91912C8.46003 4.91912 8.28613 4.74523 8.28613 4.53073C8.28613 4.31623 8.46003 4.14233 8.67453 4.14233Z" fill={menu.selectedMenu == 3 ? '#50BCF9' : '#9E9E9E'} />
              <path d="M3.88393 4.27222C4.09843 4.27222 4.27232 4.44611 4.27232 4.66061V5.049H4.66071C4.87522 5.049 5.04911 5.2229 5.04911 5.4374C5.04911 5.65189 4.87522 5.82579 4.66071 5.82579H4.27232V6.21418C4.27232 6.42868 4.09843 6.60257 3.88393 6.60257C3.66943 6.60257 3.49554 6.42868 3.49554 6.21418V5.82579H3.10714C2.89264 5.82579 2.71875 5.65189 2.71875 5.4374C2.71875 5.2229 2.89264 5.049 3.10714 5.049H3.49554V4.66061C3.49554 4.44611 3.66943 4.27222 3.88393 4.27222Z" fill={menu.selectedMenu == 3 ? '#50BCF9' : '#9E9E9E'} />
              <path d="M9.83831 5.30758C9.83831 5.52208 9.66441 5.69598 9.44992 5.69598C9.23542 5.69598 9.06152 5.52208 9.06152 5.30758C9.06152 5.09308 9.23542 4.91919 9.44992 4.91919C9.66441 4.91919 9.83831 5.09308 9.83831 5.30758Z" fill={menu.selectedMenu == 3 ? '#50BCF9' : '#9E9E9E'} />
              <path d="M7.89767 5.69598C8.11217 5.69598 8.28606 5.52208 8.28606 5.30758C8.28606 5.09308 8.11217 4.91919 7.89767 4.91919C7.68317 4.91919 7.50928 5.09308 7.50928 5.30758C7.50928 5.52208 7.68317 5.69598 7.89767 5.69598Z" fill={menu.selectedMenu == 3 ? '#50BCF9' : '#9E9E9E'} />
              <path d="M9.06292 6.08541C9.06292 5.87092 8.88902 5.69702 8.67453 5.69702C8.46003 5.69702 8.28613 5.87092 8.28613 6.08541C8.28613 6.29991 8.46003 6.47381 8.67453 6.47381C8.88902 6.47381 9.06292 6.29991 9.06292 6.08541Z" fill={menu.selectedMenu == 3 ? '#50BCF9' : '#9E9E9E'} />
            </svg>
            <Text color={menu.selectedMenu == 3 ? '#50BCF9' : ''}>Games</Text>
          </Flex>
          <Flex 
            pos={'absolute'}
            width={'20px'}
            height={'2px'}
            bg={'#50BCF9'}
            zIndex={0}
            top={0}
            boxShadow={'0px 0px 37.4765px 13.5294px rgba(80, 188, 249, 0.35)'}
            left={menuToLeft(menu.selectedMenu) + '%'}
          />
          <Flex 
            pos={'absolute'}
            width={'10px'}
            height={'10px'}
            bg={'#50BCF9'}
            zIndex={0}
            top={0}
            boxShadow={'0px 0px 37.4765px 13.5294px rgba(80, 188, 249, 0.35)'}
            left={menuToLeft(menu.selectedMenu) + '%'}
            marginLeft={'1.5%'}
            // triangle
            clipPath={'polygon(50% 0%, 0% 100%, 100% 100%)'}
            transform={'rotate(180deg)'}
          />
        </Flex>
        <Flex width={'100%'} height={'auto'} justify={'space-between'}>
          <Flex pos={'relative'} gap={'.6vw'} width={'49%'} height={'5vh'} className='menuTopItem' align={'center'} pl={'.4vw'}>
            <Flex width={'25%'} align={'center'} justify={'center'} filter={'drop-shadow(0px 0px 10px rgba(255, 255, 255, .6))'}>
              <svg width="80%" height="60%" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path fillRule="evenodd" clipRule="evenodd" d="M5.16064 6.81619C5.16064 4.09048 7.33138 1.88086 10.0091 1.88086C12.6869 1.88086 14.8576 4.09048 14.8576 6.81619C14.8576 9.52053 13.3101 12.6763 10.8958 13.8047C10.3329 14.0678 9.68533 14.0678 9.1225 13.8047C6.70811 12.6763 5.16064 9.52053 5.16064 6.81619ZM10.0091 8.34551C10.9017 8.34551 11.6253 7.62193 11.6253 6.72934C11.6253 5.83676 10.9017 5.11318 10.0091 5.11318C9.11652 5.11318 8.39297 5.83676 8.39297 6.72934C8.39297 7.62193 9.11652 8.34551 10.0091 8.34551Z" fill="white" />
                <path opacity="0.5" fillRule="evenodd" clipRule="evenodd" d="M3.24332 12.0095C3.4512 12.2718 3.40703 12.653 3.14467 12.8609C2.68111 13.2282 2.53439 13.5519 2.53439 13.8C2.53439 13.9964 2.6235 14.2348 2.89046 14.5108C3.16015 14.7897 3.58151 15.0729 4.15504 15.333C5.16858 15.7926 6.56955 16.1407 8.19095 16.2924V15.9212C8.19095 15.6834 8.33002 15.4676 8.54659 15.3694C8.76315 15.2711 9.01713 15.3085 9.19612 15.4651L10.4082 16.5257C10.5397 16.6408 10.6152 16.8071 10.6152 16.9818C10.6152 17.1566 10.5397 17.3228 10.4082 17.438L9.19612 18.4986C9.01713 18.6551 8.76315 18.6926 8.54659 18.5943C8.33002 18.4961 8.19095 18.2802 8.19095 18.0424V17.5094C6.42539 17.3545 4.84491 16.9769 3.65438 16.4369C2.99672 16.1386 2.42989 15.7782 2.01919 15.3535C1.60575 14.9261 1.32227 14.4012 1.32227 13.8C1.32227 13.0322 1.78018 12.3956 2.39192 11.9109C2.65427 11.703 3.03546 11.7472 3.24332 12.0095ZM16.775 12.0095C16.9828 11.7472 17.364 11.703 17.6263 11.9109C18.2381 12.3956 18.696 13.0322 18.696 13.8C18.696 14.9136 17.7521 15.748 16.6381 16.3062C15.4731 16.8899 13.8806 17.3031 12.0904 17.4846C11.7574 17.5183 11.4601 17.2757 11.4263 16.9427C11.3926 16.6097 11.6352 16.3124 11.9682 16.2786C13.6633 16.1068 15.1012 15.7206 16.0951 15.2225C17.1401 14.6988 17.4839 14.1691 17.4839 13.8C17.4839 13.5519 17.3371 13.2282 16.8736 12.8609C16.6112 12.653 16.5671 12.2718 16.775 12.0095Z" fill="white" />
              </svg>
            </Flex>
            <Divider pos={'absolute'} left={0} width={'3px'} borderRadius={'2px'} height={'50%'} bg={menu.nightMode ? '#5506EA' : '#FFE200'} opacity={1}></Divider>
            <Flex fontFamily={'Rajdhani'} width={'60%'} flexDir={'column'} justify={'center'}>
              <Flex color={'#AEAEAE'} lineHeight={'1'} fontSize={'.8vw'} fontWeight={'600'}>LOCATION</Flex>
              <Flex lineHeight={'1'} fontSize={'.7vw'}>{menu.streetName}</Flex>
            </Flex>
          </Flex>
          <Flex pos={'relative'} gap={'.6vw'} width={'49%'} height={'5vh'} className='menuTopItem' flexDir={'row-reverse'} align={'center'} pr={'.4vw'}>
            <Flex width={'25%'} align={'center'} justify={'center'} mt={'.4vh'}
              filter={menu.nightMode ? 'drop-shadow(0px 0px 10px rgba(85, 6, 234, 1))' : 'drop-shadow(0px 0px 10px rgba(255, 226, 0, .5))'}
            >
              {menu.nightMode ? (
                <img src={night_time} alt='day_time' width='100%' height='100%'
                />
              ) : (
                <img src={day_time} alt='day_time' width='100%' height='100%' />
              )}
            </Flex>
            <Divider pos={'absolute'} right={0} width={'3px'} borderRadius={'2px'} height={'50%'} bg={menu.nightMode ? '#5506EA' : '#FFE200'} opacity={1}></Divider>
            <Flex fontFamily={'Rajdhani'} width={'60%'} flexDir={'column'} justify={'center'} align={'flex-end'} float={'right'} textAlign={'right'}>
              <Flex color={'#AEAEAE'} lineHeight={'1'} fontSize={'.8vw'} fontWeight={'600'}>TIME</Flex>
              <Flex lineHeight={'1'} fontSize={'.7vw'}>{menu.time}</Flex>
            </Flex>
          </Flex>
        </Flex>
      </Flex>
      <Flex
        position={'absolute'}
        bottom={'40.2vh'}
        left={'1.1vw'}
        width={'17.6vw'}
        height={'17.8vw'}
        flexDir={'column'}
        gap={'1vh'}
      >
        <Box
          as={MenuList[menu.selectedMenu]}
        />
      </Flex>
    </>
  );
};

export default MenuBox;